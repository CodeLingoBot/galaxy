commander: commander -loop
discovery: discovery register -loop
